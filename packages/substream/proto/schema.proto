syntax = "proto3";

package schema;

message EntryAdded {
  string id = 1; //{block-number}-{tx-hash}-{log-index}
  string index = 2;
  string uri = 3;
  string author = 4;
  string space = 5;
}

message EntriesAdded {
  repeated EntryAdded entries = 1;
}

enum Role {
  NULL_ROLE = 0;
  MODERATOR = 1;
  MEMBER = 2;
  ADMIN = 3;
}

message RoleChange {
  oneof change {
    RoleGranted granted = 1;
    RoleRevoked revoked = 2;
  }
}

message RoleChanges {
  repeated RoleChange changes = 1;
}

message RoleGranted {
  string id = 1;
  Role role = 2;
  string account = 3;
  string sender = 4;
  string space = 5;
}

message RolesGranted {
  repeated RoleGranted roles = 1;
}

message RoleRevoked {
  string id = 1;
  Role role = 2;
  string account = 3;
  string sender = 4;
  string space = 5;
}

message RolesRevoked {
  repeated RoleRevoked roles = 1;
}

message GeoProfileRegistered {
  string requestor = 1;
  string space = 2;
  string id = 3;
}

message GeoProfilesRegistered {
  repeated GeoProfileRegistered profiles = 1;
}

message SuccessorSpaceCreated {
  string predecessorSpace = 1;
  string pluginAddress = 2;
}

message SuccessorSpacesCreated {
  repeated SuccessorSpaceCreated spaces = 1;
}

message GeoSpaceCreated {
  string daoAddress = 1;
  string spaceAddress = 2;
}

message GeoSpacesCreated {
  repeated GeoSpaceCreated spaces = 1;
}

message GeoGovernancePluginCreated {
  string daoAddress = 1;
  string mainVotingAddress = 2;
  string memberAccessAddress = 3;
}

message GeoGovernancePluginsCreated {
  repeated GeoGovernancePluginCreated plugins = 1;
}

message GeoOutput {
  repeated EntryAdded entries = 1;
  repeated RoleChange role_changes = 2;
  repeated GeoProfileRegistered profiles_registered = 3;
  // repeated SuccessorSpaceCreated successor_spaces_created = 4;
  repeated GeoSpaceCreated spaces_created = 5;
  repeated GeoGovernancePluginCreated governance_plugins_created = 6;
}